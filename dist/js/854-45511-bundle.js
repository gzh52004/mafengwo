(self.webpackChunkmafengwo=self.webpackChunkmafengwo||[]).push([[854],{2401:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(2867);const n=a.n(r)().create({baseURL:"http://47.107.122.219:6999"})},5854:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x}),a(3837);var r=a(3422),n=a.n(r),l=(a(318),a(5892)),s=a.n(l),o=(a(3429),a(5993)),c=a.n(o),i=(a(3452),a(9257)),h=a.n(i),p=(a(9861),a(6190)),u=a.n(p),d=(a(4754),a(4576)),m=a.n(d),g=(a(5199),a(3237)),E=a.n(g),k=a(7401),f=a(1897),v=a(7669),w=a.n(v),y=a(2401);let C=e=>{let t=(0,f.k6)(),{username:a}=e.location.state||"",r={hasError:!1,value:a,password:"",hasuser:!1},[l,o]=(0,k.useState)(r);return k.createElement("div",null,k.createElement(u(),{mode:"dark",leftContent:"Back",onLeftClick:()=>{t.goBack()},rightContent:[k.createElement(m(),{key:"1",type:"ellipsis"})]},"登录"),k.createElement(c(),{renderHeader:()=>"登录"},k.createElement(h(),{type:"text",placeholder:"请输入账号",error:l.hasError,onErrorClick:()=>{l.hasError&&E().info("账号最少为6位")},onChange:e=>{e.replace(/\s/g,"").length<6?o({...r,hasError:!0,value:e}):o({...r,hasError:!1,value:e})},value:l.value},"账号"),k.createElement(h(),{type:"password",clear:!0,placeholder:"输入密码",value:l.password,onChange:e=>{o({...l,password:e})}},"密码")),k.createElement(n(),{style:{marginTop:"20px",textAlign:"center"}},k.createElement(s(),{onClick:()=>{t.push("/reg")},type:"ghost",inline:!0,size:"small",style:{marginRight:"4px"}},"注册"),k.createElement(s(),{onClick:()=>{if(!l.value)return;let t=w().SHA256(l.password).toString();y.Z.post("/user/login",{username:l.value,password:t}).then((t=>{let a,{data:{data:r}}=t;if(r?a=r[0]:t.data,e.dispatch({type:"login",user:a}),t.data.code){let t,{search:a}=e.location,r=a.match(/targetUrl\=([\/\w\-]+)/);r&&(t=r[1]),E().success("登录成功",1),e.history.push({pathname:t||"/home"})}else E().fail("用户名或密码错误",1)}))},type:"ghost",inline:!0,size:"small",style:{marginRight:"4px"}},"登录")))};C=(0,a(3451).$j)()(C);const x=C}}]);