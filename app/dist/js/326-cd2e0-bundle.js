(self.webpackChunkmafengwo=self.webpackChunkmafengwo||[]).push([[326],{2401:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var a=n(2867);const i=n.n(a)().create({baseURL:"http://47.107.122.219:6999"})},7326:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>v}),n(3837);var a,i=n(3422),o=n.n(i),s=(n(8075),n(2622)),c=n.n(s),r=(n(4754),n(4576)),l=n.n(r),d=(n(7700),n(3796)),h=n.n(d),m=n(7401),p=n(2401),g=n(3451),u=n(3379),E=n.n(u),w=n(559);E()(w.Z,{insert:"head",singleton:!1}),w.Z.locals;let y=[],f=0;function x(e=0){const t={};for(let n=0;n<4;n++){const a=4*e+n;t[""+a]="row - "+a}return t}const v=(0,g.$j)((function(e){return{ischeck:e.ischeck}}),(function(e){return{dispatch:e,logout(){e({type:"logout"})}}}))(a=class extends m.Component{constructor(e){super(e),this.goinlogin=()=>{this.props.history.push("/login")},this.onEndReached=e=>{this.state.isLoading&&!this.state.hasMore||(this.setState({isLoading:!0}),setTimeout((()=>{this.rData={...this.rData,...x(++f)},this.setState({dataSource:this.state.dataSource.cloneWithRows(this.rData),isLoading:!1})}),1e3))};const t=new(h().DataSource)({rowHasChanged:(e,t)=>!0});this.state={dataSource:t,isLoading:!0,data3:["banner1","banner2","banner3"],arr:[{name:"找攻略",icon:m.createElement(l(),{type:"check-circle"}),path:"/strategy"},{name:"看游记",icon:m.createElement(l(),{type:"check"}),path:"/review"},{name:"问达人",icon:m.createElement(l(),{type:"check-circle-o"})},{name:"头脑学园",icon:m.createElement(l(),{type:"check-circle"})},{name:"酒店",icon:m.createElement(l(),{type:"check"})},{name:"去旅行",icon:m.createElement(l(),{type:"check-circle-o"})},{name:"机票",icon:m.createElement(l(),{type:"check"})},{name:"当地游乐",icon:m.createElement(l(),{type:"check-circle-o"})}],imgHeight:176}}goto(e){this.props.history.push("/detail/"+e)}change(e){this.props.history.push({pathname:e})}componentDidMount(){setTimeout((()=>{this.setState({data3:["banner1","banner2","banner3"]})}),100),p.Z.get("/goods/list",{params:{page:1,pagesize:30}}).then((e=>{y=e.data.data})),setTimeout((()=>{this.rData=x(),this.setState({dataSource:this.state.dataSource.cloneWithRows(this.rData),isLoading:!1})}),600)}render(){let{ischeck:e,logout:t}=this.props,n=y.length-1;return m.createElement("div",{className:"con"},m.createElement("header",null,m.createElement("h1",null,m.createElement("img",{src:"/images/logo2.png",alt:""})),m.createElement("div",null,"搜索目的地/攻略/游记",m.createElement(l(),{type:"search",size:"xxs"})),e?m.createElement("a",{onClick:t},"退出"):m.createElement("a",{onClick:this.goinlogin},"登录")),m.createElement("main",null,m.createElement("section",null,m.createElement("div",{className:"con_box"},m.createElement(o(),null,m.createElement(c(),{autoplay:!1,infinite:!0,autoplay:!0},this.state.data3.map((e=>m.createElement("a",{key:e,style:{display:"inline-block",width:"100%",height:this.state.imgHeight}},m.createElement("img",{src:`/images/${e}.png`,alt:"",style:{width:"100%",verticalAlign:"top"},onLoad:()=>{window.dispatchEvent(new Event("resize")),this.setState({imgHeight:"auto"})}})))))),m.createElement("ul",{className:"event"},this.state.arr.map((e=>m.createElement("li",{onClick:this.change.bind(this,e.path),key:e.name},e.icon,m.createElement("span",null,e.name))))),m.createElement(h(),{ref:e=>this.lv=e,dataSource:this.state.dataSource,renderHeader:()=>m.createElement("span",null,"推荐攻略"),renderFooter:()=>m.createElement("div",{style:{padding:30,textAlign:"center"}},this.state.isLoading?"Loading...":"Loaded"),renderRow:e=>{n<0&&(n=y.length-1);const t=y[n--];return t.data?m.createElement("div",{key:e,style:{padding:"0 15px"}},m.createElement("div",{style:{lineHeight:"50px",color:"#888",fontSize:18,borderBottom:"1px solid #F6F6F6",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}},t.data.title),m.createElement("div",{style:{display:"-webkit-box",display:"flex",padding:"15px 0"},onClick:this.goto.bind(this,t._id)},m.createElement("img",{style:{height:"64px",marginRight:"15px"},src:t.data.image,alt:""}),m.createElement("div",{style:{lineHeight:1,width:"240px",display:"flex",flexDirection:"column",justifyContent:"space-between"}},m.createElement("div",{style:{width:"100%",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",fontWeight:"bold"}},t.data.content),m.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},m.createElement("span",{style:{fontSize:"14px",color:"#FF6E27"}},t.data_source.user.name),m.createElement("img",{style:{height:"30px",marginRight:"15px",borderRadius:"50%"},src:t.data_source.user.logo,alt:""}))))):null},renderSeparator:(e,t)=>m.createElement("div",{key:`${e}-${t}`,style:{backgroundColor:"#F5F5F9",height:8,borderTop:"1px solid #ECECED",borderBottom:"1px solid #ECECED"}}),className:"am-list",pageSize:4,useBodyScroll:!0,scrollRenderAheadDistance:500,onEndReached:this.onEndReached,onEndReachedThreshold:10})))))}})||a},559:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var a=n(8814),i=n.n(a)()((function(e){return e[1]}));i.push([e.id,".con{height:100%;display:flex;flex-direction:column}.con header{width:100%;height:13.33333vw;display:flex;padding:2.66667vw;justify-content:space-between;align-items:center}.con header h1{width:24vw}.con header h1 img{width:100%}.con header div{display:flex;font-size:12px;width:46.66667vw;align-items:center;background:#f3f3f3;border-radius:20px;padding:1.86667vw;justify-content:space-between}.con header a{color:#ffa800}.con main{height:100%;flex:1}.con main section{height:100%;width:100%}.con main section .am-wingblank{margin:0 !important}.con main section .sub-title{color:#888;font-size:14px;padding:15px 0 9px 15px}.con main section .not-square-grid .am-grid-icon{width:40px;height:60px}.con main section .event{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;padding:2.66667vw}.con main section .event li{width:22%;display:flex;flex-direction:column;align-items:center;margin-bottom:2.66667vw}.con main section .event li span{margin-top:1.33333vw}\n",""]);const o=i}}]);